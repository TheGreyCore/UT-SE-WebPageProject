<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Recipes</title>
      <link rel="stylesheet" href="static/styles/recipes.css" />
      <link rel="stylesheet" href="static/styles/template.css" />
  </head>
  <body>
    <nav>
      <div class="nav-links">
        <ul>
          <li><a href="recipes.html">RECIPES</a></li>
          <li><a href="contribute.html">CONTRIBUTE</a></li>
          <li><a href="about-us.html">ABOUT US</a></li>
          <img src="static/images/logo.png" />
        </ul>
      </div>
    </nav>

    <div class="top-box">
      <h2>Discover lots of tasty recipes! ðŸ˜‹</h2>
    </div>

    <div class="recipes">
      <div class="recipe-item">
          <img class="recipe-image" src="static/images/homemade-pizza.jpg">
          <div class="food-info">
              <h2>Homemade pizza</h2>
              <p>Buying pizzas can be costly in the long term so making your own is a budget-friendly way to have one of your favourite dishes. Making a pizza base doesnâ€™t have to be a long and complicated process with this recipe!</p>
              <button onclick="openPopup('Homemade pizza')">Read recipe...</button>
          </div>
      </div>
  
      <div class="recipe-item">
        <img class="recipe-image" src="static/images/roast-s-v.jpg">
        <div class="food-info">
            <h2>Roast sausages and vegetables</h2>
            <p>If youâ€™re not a fan of chopping and frying for hours then this recipe is the one-tray wonder youâ€™re looking for. This easy weeknight recipe can also use lots of your leftover vegetables and herbs so feel free to experiment with timings when cooking those.</p>
            <button onclick="openPopup('Roast sausages and vegetables')">Read recipe...</button>
        </div>
      </div>
  
      <div class="recipe-item">
        <img class="recipe-image" src="static/images/classic-lasagne.jpg">
        <div class="food-info">
            <h2>Classic lasagne</h2>
            <p>If you want something filling and tasty, then a classic lasagne is the one for you. Itâ€™s a cheap and easy recipe, fantastic for batch cooking and/or freezing.</p>
            <button onclick="openPopup('Classic lasagne')">Read recipe...</button>
        </div>
      </div>
  </div>

  <div class="recipes">
    <div class="recipe-item">
        <img class="recipe-image" src="static/images/chicken-rice-peas.jpg">
        <div class="food-info">
            <h2>Stir-fry chicken, rice and peas</h2>
            <p>This recipe is very simple and super quick. Once you master this recipe then youâ€™ll have no trouble cooking other stir-fry recipes. For fluffy rice, cook the rice in advance, completely cool, and keep it in the fridge (but not too long). We recommend having a small bottle of light soy sauce and sweet chilli sauce at hand to serve with.</p>
            <button onclick="openPopup('Stir-fry chicken, rice and peas')">Read recipe...</button>
        </div>
    </div>

    <div class="recipe-item">
      <img class="recipe-image" src="static/images/spaghetti-bolognese.jpg">
      <div class="food-info">
          <h2>Spaghetti bolognese</h2>
          <p>This recipe is perfect for batch cooking. Youâ€™ll have lots of leftovers which means you donâ€™t have to spend loads on meals because theyâ€™ll already have been made! To make chilli con carne, follow this same recipe but replace spaghetti with rice and add in diced chilli, a can of kidney beans and cumin/paprika instead of herbs.</p>
          <button onclick="openPopup('Spaghetti bolognese')">Read recipe...</button>
      </div>
    </div>

    <div class="recipe-item">
      <img class="recipe-image" src="static/images/pot-noodle.jpg">
      <div class="food-info">
            <h2>Homemade pot noodle</h2>
            <p>Paying for your meals is quick and easy but it also costs a lot in the long term. Instead of being tempted to buy loads of salty pot noodles, why not make your own? That way, you can decide how much filling you will have instead of having a packet decide for you. Use up your leftovers in this recipe to ensure you get all of your moneyâ€™s worth of grocery shopping and decrease the chance of food going off.</p>
            <button onclick="openPopup('Homemade pot noodle')">Read recipe...</button>
      </div>
    </div>
  </div>

  <div class="recipes">
    <div class="recipe-item">
        <img class="recipe-image" src="static/images/pasta-sauce.jpg">
        <div class="food-info">
            <h2>Homemade pasta sauce</h2>
            <p>No need to buy any of those convenience bottled pasta sauces. You can make a batch full of pasta sauce which can store in your fridge for days and can even be frozen for months. Itâ€™s quick, itâ€™s simple, itâ€™s healthy.</p>
            <button onclick="openPopup('Homemade pasta sauce')">Read recipe...</button>
        </div>
    </div>

    <div class="recipe-item">
      <img class="recipe-image" src="static/images/fajitas-guacamole.jpg">
      <div class="food-info">
            <h2>Fajitas & guacamole</h2>
            <p>Fajitas donâ€™t require a lot of ingredients so theyâ€™re perfect if you donâ€™t want to buy too many things to cook. They also make lots of leftovers so you donâ€™t have to cook every day to have tasty meals. You can have the fajitas on their own but having homemade Guacamole will blow your tastebuds away!</p>
            <button onclick="openPopup('Fajitas & guacamole')">Read recipe...</button>
      </div>
    </div>

    <div class="recipe-item">
      <img class="recipe-image" src="static/images/burger.jpg">
      <div class="food-info">
            <h2>Burger, chips & salad</h2>
            <p>This classic recipe can bring a taste of home flooding back. Although itâ€™s nice to have a burger and chips when youâ€™re out, you can bring this meal into your home and have it for half the price!</p>
            <button onclick="openPopup('Burger, chips & salad')">Read recipe...</button>
      </div>
    </div>
  </div>

  <div class="recipes">
    <div class="recipe-item">
        <img class="recipe-image" src="static/images/potato.jpg">
        <div class="food-info">
            <h2>Twice-baked potato</h2>
            <p>If you want something thatâ€™s filling and easy to make, this recipe is the one for you. Although it may take a little while to cook, there are no complicated steps involved. Leave it to bake while you're studying. Itâ€™s tasty, punchy and oh-so-filling!</p>
            <button onclick="openPopup('Twice-baked potato')">Read recipe...</button>
        </div>
    </div>
  </div>

    <div class="top-box">
        <h2>Discover also other recipes! ðŸ˜‹</h2>
    </div>

    <div id="popup-container">
        <span id="close-btn" onclick="closePopup()">X</span>
        <h2 id="popup-title">RECIPE</h2>
        <p id="popup-text">This is the text content of the popup.</p>
  </div>


    <div class="recipes" id="recipe-list"></div>

    <script>
        // Script is made by Dmitri Matetski using CHATGPT, google, and knowledge
        document.addEventListener('DOMContentLoaded', () => {
            const recipeList = document.getElementById('recipe-list');

            // MÃ¤Ã¤rake API valikud
            const options = {
                method: 'GET',
                url: 'https://tasty.p.rapidapi.com/recipes/list',
                params: {
                    from: Math.floor(Math.random() * 501), // Random value from 0 to 500
                    size: '12',
                    tags: 'under_30_minutes'
                },
                headers: {
                    // 'X-RapidAPI-Key': '47edec5a65mshb2001658287133dp148951jsn0044f52203f9', FIX THIS IN PRODUCT
                    'X-RapidAPI-Host': 'tasty.p.rapidapi.com'
                }
            };

            // Konstrueerige URL koos pÃ¤ringuparameetritega
            const apiUrl = new URL(options.url);
            apiUrl.search = new URLSearchParams(options.params).toString();

            // Andmete toomine API-st
            fetch(apiUrl, { headers: options.headers })
                .then(response => response.json())
                .then(data => {
                    // Taasesita retseptid ja loo div elemendid etteantud malliga.
                    data.results.forEach(recipe => {
                        const recipeItem = document.createElement('div');
                        recipeItem.classList.add('recipe-item');

                        // Loo pildielement pisipildi jaoks.
                        const thumbnail = document.createElement('img');
                        thumbnail.classList.add('recipe-image');
                        thumbnail.src = recipe.thumbnail_url;
                        thumbnail.alt = recipe.name;

                        // Loo div-element toiduteabe jaoks
                        const foodInfo = document.createElement('div');
                        foodInfo.classList.add('food-info');

                        // Loo h2-element retsepti nimele
                        const recipeName = document.createElement('h2');
                        recipeName.textContent = recipe.name;

                        // Loo p element kirjelduse jaoks
                        const description = document.createElement('p');
                        description.textContent = recipe.description;

                        // Lisage pisipilt, nimi ja kirjeldus toidu infodivile.
                        foodInfo.appendChild(recipeName);
                        foodInfo.appendChild(description);

                        // Lisage pisipilt ja toiduteave retsepti elemendi div'ile
                        recipeItem.appendChild(thumbnail);
                        recipeItem.appendChild(foodInfo);

                        // Retsepti elemendi lisamine retseptide loendisse div
                        recipeList.appendChild(recipeItem);
                    });
                })
                .catch(error => {
                    console.error('Error fetching recipes:', error);
                });
        });

        // Funktsioon popup'i avamiseks
        function openPopup(id) {
          // Lae andmed JSON failist
          fetch('data.json')
            .then(response => response.json())
            .then(data => {
              var text = data[id];

              if (text) {
                displayPopup(id, text);
              } else {
                alert('Ãœksust ei leitud.');
              }
            })
            .catch(error => console.error('Andmete laadimisel tekkis viga:', error));
        }

        // Funktsioon popup'i kuvamiseks
        function displayPopup(id, text) {
          var title = document.getElementById('popup-title');
          var popupText = document.getElementById('popup-text');
          var popupContainer = document.getElementById('popup-container');

          title.innerText = 'Recipie: ' + id;
          popupText.innerText = text;
          popupContainer.style.display = 'block';
        }

        // Funktsioon popup'i sulgemiseks
        function closePopup() {
          document.getElementById('popup-container').style.display = 'none';
        }

    </script>



    <footer>
      <div class="line">
        <hr style="border-color: #35332E; margin-top: -50px;">
      </div>
      <h2>Â© POORSTUDENT COOKBOOK. FEEDING HUNGRY STRATEGIACALLY.</h2>
      <h2 class="alumine">Created by Tartu University students.</h2>
    </footer>
  </body>
</html>

